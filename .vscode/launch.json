{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Python: Run Gloo Demo",
            "type": "debugpy",
            "request": "launch",
            "program": "${workspaceFolder}/run_gloo.py",
            "console": "integratedTerminal",
            "cwd": "${workspaceFolder}",
            "args": [
                "--arch", "resnet8", // 模型名称
                "--complex_arch", "master=resnet8,worker=resnet8", //复杂和简单模型
                "--method", "fedavg", // 聚合算法
                "--experiment", "demo", 
                "--group_norm_num_groups=16",  //组归一化个数
                "--data", "cifar10",
                "--pin_memory", "True",
                "--batch_size", "64",
                "--num_workers", "2",   // 原本是2，现在改为0，方便调试
                "--distillation_coefficient", "0",
                "--projection=0", // 是否对齐，主要是蒸馏用
                "--partition_data", "non_iid_dirichlet",
                "--non_iid_alpha", "1",
                "--train_data_ratio", "1",
                "--val_data_ratio", "0.1", // 训练集划分多少给验证集
                "--n_clients", "20",
                "--participation_ratio", "0.2", // 客户端参与率
                "--n_comm_rounds", "100",
                "--local_n_epochs", "20",      // 本地轮次
                "--world_conf", "0,0,1,1,100", //这里指定GPU序列
                "--on_cuda", "True",
                //"--fl_aggregate", "scheme=federated_average",
                "--optimizer", "sgd",
                "--lr", "0.05",
                "--local_prox_term", "0",
                "--lr_warmup", "False",
                "--lr_warmup_epochs", "5",
                "--lr_warmup_epochs_upper_bound", "150",
                "--lr_scheduler", "MultiStepLR",
                "--lr_decay", "0.1",
                "--weight_decay", "1e-5",
                "--use_nesterov", "False",
                "--momentum_factor", "0.9",
                "--track_time", "True",
                "--display_tracked_time", "True",
                "--python_path", "${command:python.interpreterPath}",
                "--hostfile", "hostfile",
                "--manual_seed", "7",
                "--pn_normalize", "True", //数据集是否进程归一化
                "--same_seed_process", "False", //是否每个客户端使用相同的种子
                "--port","50022"
            ]
        }
    ]
}
//--fl_aggregate scheme=federated_average

/*

```bash
python  run_gloo.py \
    --arch resnet8 --complex_arch master=resnet8,worker=resnet8 --method fedavg\
    --experiment demo  --group_norm_num_groups=16\
    --data cifar10 --pin_memory True --batch_size 64 --num_workers 2 --distillation_coefficient 0 --projection=0 \
    --partition_data non_iid_dirichlet --non_iid_alpha 1 --train_data_ratio 1 --val_data_ratio 0.1 \
    --n_clients 20 --participation_ratio 0.2 --n_comm_rounds 100 --local_n_epochs 20 --world_conf 0,0,1,1,100 --on_cuda True \
    --fl_aggregate scheme=federated_average \
    --optimizer sgd --lr 0.05 --local_prox_term 0 --lr_warmup False --lr_warmup_epochs 5 --lr_warmup_epochs_upper_bound 150 \
    --lr_scheduler MultiStepLR --lr_decay 0.1 \
    --weight_decay 1e-5 --use_nesterov False --momentum_factor 0.9 \
    --track_time True --display_tracked_time True --python_path $(which python) --hostfile hostfile \
    --manual_seed 7 --pn_normalize True --same_seed_process False 
```

*/